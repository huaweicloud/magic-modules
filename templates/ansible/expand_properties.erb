<% properties.each_index do |i|
     prop = properties[i]
     r = sprintf("%s[\"%s\"] = v", map_obj, prop.name)
-%>
<%   if i != 0 -%>

<%   end -%>
<%   unless prop.default.nil? -%>
    <%= sprintf("%s[\"%s\"] = %s", map_obj, prop.name, convert_parameter(prop, args, prefix)) %>
<%     next -%>
<%   end -%>
    v = <%= convert_parameter(prop, args, prefix) %>
<%   unless prop.send_empty_value -%>
    if (v is not None) and (not is_empty_value(v)):
        <%= r %>
<%   else -%>
    if v is not None:
        <%= r %>
<%   end -%>
<% end -%>
